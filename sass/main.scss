@import 'contrast-checker.scss';

@function a11ycolor($foreground, $background, $ratio){
  $currentRatio: uikit-color-contrast( $foreground, $background );
  $pass: '';
  $result: '';
  
  @if  $currentRatio >= $ratio  {
    @return $foreground;
  } @else {
    @while $currentRatio < $ratio {
      $h: hue($foreground); // Gets the hue component of a color.
      $s: saturation($foreground); //Gets the saturation component of a color.
      $l: lightness($foreground); // Gets the lightness component of a color
      $x: $l - 1;
      $foreground: hsl($h, $s, $x);
      @return a11ycolor($foreground, $background, $ratio);
    }
  }
}


// Normal css
$toMakeA11y: pink;
$text: $toMakeA11y;
$bg: #FFF;

// Run the a11y function
$textA11y: a11ycolor($text, $bg, 3.1);

body {
  background-color: $bg;
  text-align: center;
  padding-top: 50px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

h1:first-of-type {
  color: $text;
  &:after {
    content: " " + $toMakeA11y;
  }
}

h1 {
  color: $textA11y;
  &:after {
    content: " " + $textA11y;
  }
}